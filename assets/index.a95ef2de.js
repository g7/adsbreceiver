var oe=Object.defineProperty;var se=(t,n,e)=>n in t?oe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var C=(t,n,e)=>(se(t,typeof n!="symbol"?n+"":n,e),e);import{r as g,o as u,c as m,a as s,b as l,w as v,d as y,e as P,t as T,F,f as $,g as _,h as ie,i as ae,u as I,j as re,B as z,k as le,l as ce,m as de,n as ue,p as me,q as he}from"./vendor.4d18dcd3.js";const pe=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}};pe();var U,q,h={GlobalStorage:(U=class{},C(U,"store",{addUsers:{amount:0}}),U),PasswordHashes:(q=class{},C(q,"hashes",{}),q),parseJsonFile:async function(t){return new Promise((n,e)=>{const a=new FileReader;a.onload=o=>{try{return n(JSON.parse(o.target.result))}catch(i){return e(i)}},a.onerror=o=>e(o),a.readAsText(t)})},saveTemplateAsFile:(t,n,e)=>{const a=new Blob(e?[n]:[JSON.stringify(n,null,2)],{type:"text/json"}),o=document.createElement("a");o.download=t,o.href=window.URL.createObjectURL(a),o.dataset.downloadurl=["text/json",o.download,o.href].join(":");const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});o.dispatchEvent(i),o.remove()},copy:function(t){var n=document.createElement("textarea");n.innerHTML=t,document.body.appendChild(n),n.select();var e=document.execCommand("copy");return document.body.removeChild(n),e},setupFormComponentWatcher:(t,n,e)=>{t!==void 0&&"methods"in t&&"watchFormData"in t.methods&&n(e,async(a,o)=>{t.methods.watchFormData(a,o)})},uid:()=>(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,""),getFormKey:(t,n,e)=>t+"_"+n+"_"+e,getFormValue:function(t,n,e,a){return n[this.getFormKey(t,e,a)]}},b=(t,n)=>{for(const[e,a]of n)t[e]=a;return t};const fe={},ve={class:"navbar navbar-expand-lg navbar-light fixed-top py-3",id:"mainNav"},ge={class:"container px-4 px-lg-5"},_e=y("Fuel Ignition \u{1F680}"),be=P('<button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ms-auto my-2 my-lg-0"><li class="nav-item"><a class="nav-link" href="#/">Start</a></li><li class="nav-item"><a class="nav-link" href="#about">About</a></li><li class="nav-item"><a class="nav-link" href="https://microos.opensuse.org/" target="_blank" rel="noopener noreferrer">MicroOS</a></li><li class="nav-item"><a class="nav-link" href="https://kubic.opensuse.org/" target="_blank" rel="noopener noreferrer">Kubic</a></li><li class="nav-item"><a class="nav-link" href="https://coreos.github.io/ignition/" target="_blank" rel="noopener noreferrer">Ignition Docs</a></li></ul></div>',2);function ye(t,n){const e=g("router-link");return u(),m("nav",ve,[s("div",ge,[l(e,{class:"navbar-brand",to:"/"},{default:v(()=>[_e]),_:1}),be])])}var we=b(fe,[["render",ye]]);const xe={},$e={class:"page-section bg-primary",id:"about"},ke=P('<div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-lg-8 text-center"><h2 class="text-white mt-0">We&#39;ve got what you need!</h2><hr class="divider divider-light"><p class="text-white-75 mb-4">Looking for an easy way to write and edit Ignition configs? Look no further than Fuel Ignition! Our user-friendly web application makes it a breeze to create the config files you need. No strings attached!</p><a class="btn btn-light btn-xl" href="/fuel-ignition/edit">Get Started!</a></div></div></div>',1),Fe=[ke];function Ce(t,n){return u(),m("section",$e,Fe)}var Te=b(xe,[["render",Ce]]);const Se={class:"bg-light py-5"},Ke={class:"container px-4 px-lg-5"},Ie={class:"small text-center text-muted"},Oe={setup(t){return(n,e)=>{const a=g("router-view");return u(),m(F,null,[l(we),l(a),l(Te),s("footer",Se,[s("div",Ke,[s("div",Ie," Copyright \xA9 "+T(new Date().getFullYear())+" \u2013 built with \u{1F49A}, Vue, and openSUSE ",1)])])],64)}}},Ae={},Ve={class:"masthead"},Ee={class:"container px-4 px-lg-5 h-75"},Le={class:"row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center"},Ue=s("div",{class:"col-lg-8 align-self-end"},[s("h1",{class:"text-white font-weight-bold"},[y(" Ignition & Combustion "),s("br"),y("Config Generator ")]),s("hr",{class:"divider"})],-1),qe={class:"col-lg-8 align-self-baseline"},Ne=s("p",{class:"text-white-75 mb-5"},[y(" Easily generate new or edit existing Ignition configs. "),s("br"),y("No more fiddling around with JSON or Butane. ")],-1),Be={class:"container-fluid"},Pe={class:"row"},ze={class:"col-xs-6 mb-3"},Re=y("Create New Config"),Je={class:"col-xs-6"},He=y("JSON to Ignition IMG");function Me(t,n){const e=g("router-link");return u(),m("header",Ve,[s("div",Ee,[s("div",Le,[Ue,s("div",qe,[Ne,s("div",Be,[s("div",Pe,[s("div",ze,[l(e,{class:"btn btn-primary btn-xl",to:"/edit"},{default:v(()=>[Re]),_:1})]),s("div",Je,[l(e,{class:"btn btn-primary btn-xl",to:"/convert"},{default:v(()=>[He]),_:1})])])])])])])])}var je=b(Ae,[["render",Me]]),De="/fuel-ignition/assets/undraw_programming_re_kg9v.a835d9b3.svg",Ge="/fuel-ignition/assets/undraw_building_blocks_re_5ahy.a7d51760.svg";const We={style:{width:"100% !important"},class:"expandable-comp text-white"},Ye={key:0},Qe={key:0,class:"mb-5"},Xe=s("hr",{class:"divider"},null,-1),Ze=[Xe],et={class:"mt-1"},w={props:{displayAtLeastOne:{type:Boolean,default:!0},maxComponents:{type:Number,default:-1},title:String},setup(t){const n=t,e=$(n.displayAtLeastOne?1:0);return(a,o)=>(u(),m("div",We,[n.title!==void 0?(u(),m("h4",Ye,T(n.title),1)):_("",!0),(u(!0),m(F,null,ie(e.value,i=>(u(),m("div",{key:i},[ae(a.$slots,"default"),i<e.value?(u(),m("div",Qe,Ze)):_("",!0)]))),128)),s("div",et,[t.maxComponents===-1||t.maxComponents!==-1&&t.maxComponents>e.value?(u(),m("button",{key:0,class:"btn btn-primary mr-5 mb-5",onClick:o[0]||(o[0]=i=>e.value++)}," \xA0\xA0\xA0Add\xA0\xA0\xA0 ")):_("",!0),e.value>1||!n.displayAtLeastOne&&e.value>0?(u(),m("button",{key:1,class:"btn btn-danger ml-5 mr-5 mb-5",onClick:o[1]||(o[1]=i=>e.value>1||!n.displayAtLeastOne?e.value--:e.value)}," Remove ")):_("",!0)])]))}},tt={key:0,class:"sk-folding-cube"},nt=s("div",{class:"sk-cube1 sk-cube"},null,-1),ot=s("div",{class:"sk-cube2 sk-cube"},null,-1),st=s("div",{class:"sk-cube4 sk-cube"},null,-1),it=s("div",{class:"sk-cube3 sk-cube"},null,-1),at=[nt,ot,st,it],R={props:["ignJson","combustionScript"],setup(t){const n=t;var e=$(!1);const a=new J,o=async function(){i();try{let r=await a.convertToImage(n.ignJson,n.combustionScript);a.downloadImageFile(r)}catch(r){alert(r)}i()},i=function(){document.querySelector("#loadingToggle").click()};return(r,d)=>(u(),m(F,null,[s("button",{class:"btn btn-primary mb-4",style:{width:"100%"},onClick:d[0]||(d[0]=c=>o())}," Convert and Download "),I(e)?(u(),m("div",tt,at)):_("",!0),s("button",{id:"loadingToggle",hidden:"",onClick:d[1]||(d[1]=c=>re(e)?e.value=!I(e):e=!I(e))})],64))}};class J{constructor(){C(this,"images",{zero:{ignFatDirEntry:61536,ignFileOffset:86016},combustion:{ignFatDirEntry:61632,combFatDirEntry:63680,ignFileOffset:15796224,combFileOffset:3244032}});C(this,"alphabet",["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whisky","X-ray","Yankee","Zulu","Nico","Ignaz","Robert","Moritz"]);String.prototype.replaceAt=function(n,e){return this.substring(0,n)+e+this.substring(n+e.length)},String.prototype.hexEncode=function(){var n,e,a="";for(e=0;e<this.length;e++)n=this.charCodeAt(e).toString(16),a+=("000"+n).slice(-4);return a}}bufferToHex(n){return[...new Uint8Array(n)].map(e=>e.toString(16).padStart(2,"0")).join("")}strToHex(n){for(var e="",a=0;a<n.length;a++)e+=n.charCodeAt(a).toString(16);return e}async fetchImage(n){return fetch("templates/ignition-"+n+"-template.img").then(e=>e.arrayBuffer())}async convertToImage(n,e){let a=JSON.stringify(n,null,2),o=e===void 0?"zero":"combustion",i=e!==void 0;console.log("images["+o+"] :>> ",this.images[o]);let r=await this.fetchImage(o),d=new DataView(r),c=this.images[o].ignFatDirEntry,p=new DataView(r,c+28,4),f=new TextEncoder,x=f.encode(a),N=p.getInt32(0,!0);if(p.setInt32(0,x.length,!0),x.length>=N)throw new Error(`Warning!

Ignition configuration is too large.

The maximum file size for the Ignition configuration is currently set to `+N+"B.");for(let k=0;k<x.length;k++)d.setInt8(this.images[o].ignFileOffset+k,x[k]);if(console.log("jsonSize(string): "+a.length),console.log("jsonSize(bin): "+x.length),console.log("dirEntry :>> ",c),console.log("images["+o+"] :>> ",this.images[o]),i){let k=this.images[o].combFatDirEntry;p=new DataView(r,k+28,4);let S=f.encode(e),B=p.getInt32(0,!0);if(p.setInt32(0,S.length,!0),S.length>=B)throw new Error(`Warning!

Combustion configuration is too large.

The maximum file size for the Combustion configuration is currently set to `+B+"B.");for(let K=0;K<S.length;K++)d.setInt8(this.images[o].combFileOffset+K,S[K])}var ne=new Uint8Array(r);return new Blob([ne],{type:"application/octet-stream"})}downloadImageFile(n){var e=window.document.createElement("a");e.href=window.URL.createObjectURL(n),e.download="ignition-"+this.alphabet[Math.floor(Math.random()*this.alphabet.length)].toLowerCase()+".img",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}const O="user",rt={setup:()=>{const t=h.uid();return{uid:t,Utils:h,formKey:n=>h.getFormKey(O,n,t)}},methods:{encodeToIgn:function(t,n){h.GlobalStorage.store.addUsers.amount=0;const e=(o,i)=>h.getFormValue(O,n,o,i),a=O+"_name_";Object.keys(n).filter(o=>o.includes(a)).map(o=>o.replace(a,"")).forEach(o=>{if(t.passwd="passwd"in t?t.passwd:{users:[]},h.GlobalStorage.store.addUsers.amount++,e("name",o)!=="root"&&(h.GlobalStorage.store.addUsers.onlyUsernameRoot=!1),e("runs_on_suse",o)===!0&&(t.storage===void 0&&(t.storage={}),t.storage.filesystems===void 0&&(t.storage.filesystems=[]),t.storage.filesystems.push({device:"/dev/disk/by-label/ROOT",format:"btrfs",mountOptions:["subvol=/@/home"],path:"/home",wipeFilesystem:!1})),t.passwd.users!==void 0){const i=e("ssh_keys",o),r=i!==void 0&&i.includes(",")?i.replaceAll(" ","").split(","):[i],d=e("passwd",o)===""||e("passwd",o)===void 0;t.passwd.users.push({name:e("name",o),passwordHash:d?void 0:h.PasswordHashes.hashes[o],sshAuthorizedKeys:i===void 0||i===""?void 0:r})}})},watchFormData:async function(t,n){const e=(a,o)=>t[h.getFormKey(O,a,o)];Object.keys(t).filter(a=>a.includes("user_passwd")&&!a.includes("hashed")).map(a=>a.replace("user_passwd_","")).forEach(async a=>{const o=e("passwd",a),i=e("hash_type",a),r=o===""||o===void 0,d=t["user_passwd_"+a]===n["user_passwd_"+a];r||d||lt(o,i).then(c=>h.PasswordHashes.hashes[a]=c)})}}};async function lt(t,n){if(n==="Hash Yourself")return t;var e=await z.genSalt(10).then();return z.hash(t,e)}const ct={class:"users"},dt={key:0};function ut(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",ct,[l(r,{class:"form-control",name:t.formKey("name"),label:"Username (required)",placeholder:"write your os username here",validation:"required","validation-behavior":"live",value:"root",help:"A new user will be created, if it does not exist."},null,8,["name"]),l(r,{name:t.formKey("hash_type"),label:"Password Hash Type",placeholder:"bcrypt",type:"select",validation:"optional","validation-behavior":"live",value:"bcrypt",options:["bcrypt","Hash Yourself"],help:"The way you want your password to be hashed."},null,8,["name"]),l(r,{name:t.formKey("passwd"),label:"Password",placeholder:"write the corresponding password here",type:"password",validation:"optional","validation-behavior":"live",help:"Your password is never sent over the internet, everything is local."},null,8,["name"]),l(r,{name:t.formKey("ssh_keys"),label:"SSH Public Keys",placeholder:"write the corresponding ssh keys here, separated by commas, spaces are ignored",type:"textarea",validation:"optional","validation-behavior":"live",help:"Your keys are never sent over the internet, everything is local."},null,8,["name"]),t.Utils.GlobalStorage.store.addUsers.amount==0?(u(),m("div",dt,[l(r,{name:t.formKey("runs_on_suse"),label:"Mount /home",validation:"required",type:"checkbox","validation-behavior":"live",help:"Required on SUSE related systems for creating users not named root. Otherwise, applying the Ignition config will fail"},null,8,["name"])])):_("",!0)])}var H=b(rt,[["render",ut]]);const A="create_file",mt={setup:()=>{const t=h.uid();return{sourceType:$("data"),formKey:e=>h.getFormKey(A,e,t)}},methods:{encodeToIgn:function(t,n){const e=(i,r)=>h.getFormValue(A,n,i,r),a=function(i){return window.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,function(d,c){return String.fromCharCode("0x"+c)}))},o=A+"_path_";Object.keys(n).filter(i=>i.includes(o)).map(i=>i.replace("create_file_path_","")).forEach(i=>{t.storage===void 0&&(t.storage={}),t.storage.files===void 0&&(t.storage.files=[]);let r,d={};switch(e("source_type",i)){case"data":let c=e("data_content",i);r="data:text/plain;charset=utf-8;base64,"+a(c===void 0?"":c);break;case"data-vagrant":let p=e("data_vagrant_content",i);r="data:,"+encodeURIComponent(p===void 0?"":p);break;case"https":r=e("https_content",i);break;case"http":r=e("http_content",i);let f=e("http_verification",i);f&&(d.verification={hash:f});break;case"tftp":case"s3":case"gs":r=e("tftp_s3_gs_content",i);break}t.storage.files.push(Object.assign({path:e("path",i),mode:parseInt(e("mode",i)),overwrite:e("overwrite",i),contents:{source:r}},d))})}}},ht={class:"createfiles"},pt={class:"source"},ft={key:0,class:"data"},vt={key:1,class:"data-vagrant"},gt={key:2,class:"https"},_t={key:3,class:"http"},bt={key:4,class:"tftp-s3-gs"};function yt(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",ht,[l(r,{name:t.formKey("path"),label:"File Path (required)",placeholder:"path on the filesystem",validation:"required","validation-behavior":"live",value:"/etc/someconfig",help:"The absolute path to the file"},null,8,["name"]),l(r,{name:t.formKey("overwrite"),label:"Overwrite",placeholder:"path on the filesystem",validation:"required",type:"checkbox","validation-behavior":"live",help:"Whether to delete preexisting nodes at the path"},null,8,["name"]),l(r,{name:t.formKey("mode"),label:"File Mode (required)",type:"number",value:"420",validation:"required","validation-behavior":"live",help:"The file's permission mode. Note that the mode must be properly specified as a decimal value (i.e. 0644 -> 420)."},null,8,["name"]),s("div",pt,[l(r,{type:"select",name:t.formKey("source_type"),modelValue:t.sourceType,"onUpdate:modelValue":n[0]||(n[0]=d=>t.sourceType=d),label:"Scheme for file contents url (use data for plain text)",help:"If source is omitted and a regular file already exists at the path, Ignition will do nothing. If source is omitted and no file exists, an empty file will be created.",options:["data","data-vagrant","https","http","tftp","s3","gs","omit"]},null,8,["name","modelValue"])]),t.sourceType==="data"?(u(),m("div",ft,[l(r,{name:t.formKey("data_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):_("",!0),t.sourceType==="data-vagrant"?(u(),m("div",vt,[l(r,{name:t.formKey("data_vagrant_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):_("",!0),t.sourceType==="https"?(u(),m("div",gt,[l(r,{name:t.formKey("https_content"),label:"HTTPS Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"])])):_("",!0),t.sourceType==="http"?(u(),m("div",_t,[l(r,{name:t.formKey("http_content"),label:"HTTP Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"]),l(r,{name:t.formKey("http_verification"),label:"Verification Hash (optional)",placeholder:"e.g. sha512-012345678..",type:"text",validation:"optional","validation-behavior":"live",help:"The hash of the contents, in the form <type>-<value> where type is either sha512 or sha256."},null,8,["name"])])):_("",!0),!t.sourceType.includes("http")&&t.sourceType!=="data"&&t.sourceType!=="data-vagrant"&&t.sourceType!=="omit"?(u(),m("div",bt,[l(r,{name:t.formKey("tftp_s3_gs_content"),label:t.sourceType.toUpperCase()+" Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required","validation-behavior":"live"},null,8,["name","label"])])):_("",!0)])}var M=b(mt,[["render",yt]]);const V="start_service",wt={setup:()=>{const t=h.uid();return{sourceType:$("data"),formKey:e=>h.getFormKey(V,e,t)}},methods:{encodeToIgn:function(t,n){const e=(o,i)=>h.getFormValue(V,n,o,i),a=V+"_name_";Object.keys(n).filter(o=>o.includes(a)).map(o=>o.replace(a,"")).forEach(o=>{t.systemd="systemd"in t?t.systemd:{units:[]};let i=e("enabled",o),r=i==="omit";t.systemd.units.push({name:e("name",o),enabled:r?void 0:i==="yes",contents:e("contents",o)})})}}},xt={class:"startservices"};function $t(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",xt,[l(r,{name:t.formKey("name"),label:"Service Name (required)",validation:"required","validation-behavior":"live",value:"example.service",help:"Every unit must have a unique name. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(r,{name:t.formKey("enabled"),label:"enabled",value:"yes",validation:"optional",type:"select","validation-behavior":"live",help:"Whether or not the service shall be enabled. When true, the service is enabled. When false, the service is disabled. When omitted, the service is unmodified.",options:["yes","no","omit"]},null,8,["name"]),l(r,{name:t.formKey("contents"),label:"Service Unit Content (optional)",placeholder:"write the service unit content here, spaces, newlines etc. are preserved",type:"textarea",validation:"optional","validation-behavior":"live",help:"The contents of the unit."},null,8,["name"])])}var j=b(wt,[["render",$t]]);const E="modify_service",kt={setup:()=>{const t=h.uid();return{formKey:n=>h.getFormKey(E,n,t)}},methods:{encodeToIgn:function(t,n){const e=(o,i)=>h.getFormValue(E,n,o,i),a=E+"_name_";Object.keys(n).filter(o=>o.includes(a)).map(o=>o.replace(a,"")).forEach(o=>{t.systemd="systemd"in t?t.systemd:{units:[]};let i=t.systemd.units.find(d=>d.name===e("name",o)),r={name:e("dropin_name",o),contents:e("contents",o)};if(i!==void 0){if(i.dropins!==void 0){i.dropins.push(r);return}i.dropins=[r];return}t.systemd.units.push({name:e("name",o),dropins:[r]})})}}},Ft={class:"modifyservice"};function Ct(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",Ft,[l(r,{name:t.formKey("name"),label:"Name of the service that you want to modify (required)",validation:"required","validation-behavior":"live",value:"example.service",placeholder:"e.g. systemd-journald.service",help:"The name of the unit. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(r,{name:t.formKey("dropin_name"),label:"Name of the drop-in file",validation:"required","validation-behavior":"live",value:"debug.conf",help:"The name of the drop-in. This must be suffixed with \u201C.conf\u201D."},null,8,["name"]),l(r,{name:t.formKey("contents"),label:"Drop-In Unit Content (required)",placeholder:"e.g. [Service].. | spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Write the service unit content here, spaces, newlines etc. are preserved."},null,8,["name"])])}var D=b(kt,[["render",Ct]]);const L="debug_bytes",Tt={setup:()=>{const t=h.uid();return{uid:t,formKey:n=>h.getFormKey(L,n,t)}},methods:{encodeToIgn:function(t,n){const e=(o,i)=>h.getFormValue(L,n,o,i),a=L+"_size_";Object.keys(n).filter(o=>o.includes(a)).map(o=>o.replace(a,"")).forEach(o=>{var i=new Array(parseInt(e("size",o)-128)+1).join("B");t.debugBytes=t.debugBytes!==void 0?t.debugBytes:[],t.debugBytes.push(i)})}}},St={class:"users"};function Kt(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",St,[l(r,{name:t.formKey("size"),label:"Bytes To Add",type:"number",validation:"required","validation-behavior":"live",value:"2048",help:"This is a debug form."},null,8,["name"])])}var G=b(Tt,[["render",Kt]]);const W="debug_analyze",It={setup:()=>{const t=h.uid();let n=new J;return console.log(n),{uid:t,formKey:e=>h.getFormKey(W,e,t)}},methods:{encodeToIgn:function(t,n){const e=W+"_file_";Object.keys(n).filter(a=>a.includes(e)).map(a=>a.replace(e,"")).forEach(a=>{console.log("--- debug analyze file ---");let o;try{console.log('formData["debug_analyze_file_" + id] :>> ',n["debug_analyze_file_"+a]),o=Object.assign({},n["debug_analyze_file_"+a][0])}catch{}console.log(o),console.log("-----")})}}},Ot={class:"analyze"};function At(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",Ot,[l(r,{name:t.formKey("file"),label:"File To Analyze (Console Log)",type:"file",validation:"required","validation-behavior":"live",help:"This is a debug form."},null,8,["name"])])}var Y=b(It,[["render",At]]);const Q="comb_install",Vt={setup:()=>{const t=h.uid();return{uid:t,formKey:n=>h.getFormKey(Q,n,t)}},methods:{encodeToIgn:function(t,n){Object.keys(n).filter(e=>e.includes(Q)).forEach(e=>{t.combustion+=`
zypper --non-interactive install `+n[e]})}}},Et={class:"combustioninstall"};function Lt(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",Et,[l(r,{name:t.formKey("package_name"),label:"Name of the package you want to install",type:"text",validation:"required","validation-behavior":"live",value:"vim-small",help:"This will add the line 'zypper --non-interactive install {package name}' to the combustion script."},null,8,["name"])])}var X=b(Vt,[["render",Lt]]);const Z="comb_raw",Ut={setup:()=>{const t=h.uid();return{uid:t,formKey:n=>h.getFormKey(Z,n,t)}},methods:{encodeToIgn:function(t,n){Object.keys(n).filter(e=>e.includes(Z)).forEach(e=>{t.combustion+=`
`+n[e]})}}},qt={class:"combustionraw"};function Nt(t,n,e,a,o,i){const r=g("FormKit");return u(),m("div",qt,[l(r,{name:t.formKey("script_content"),label:"Lines to add",type:"textarea",validation:"required","validation-behavior":"live",value:'echo "hello combustion"',help:"You can find examples of a combustion script here: https://en.opensuse.org/Portal:MicroOS/Combustion#Simple_example"},null,8,["name"])])}var ee=b(Ut,[["render",Nt]]);const Bt={class:"page-section p-2 bg-dark",id:"edit"},Pt={class:"container mt-5 px-0"},zt=s("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[s("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[s("h1",{class:"mt-5"},"Ignition Config Generator"),s("hr",{class:"divider"}),s("div",{class:"d-grid mb-5"},[s("img",{class:"text-center mx-auto w-50",src:De})])])],-1),Rt={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Jt={class:"col-lg-6"},Ht={class:"form-floating mb-3"},Mt={key:0},jt={class:"row gx-4 gx-lg-5 justify-content-center"},Dt=s("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[s("h1",{class:"mt-5"},"Add Combustion Scripts"),s("hr",{class:"divider"}),s("div",{class:"d-grid mb-5"},[s("img",{class:"text-center mx-auto w-50",src:Ge})])],-1),Gt={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Wt={class:"col-lg-6"},Yt={class:"form-floating mb-3"},Qt=s("hr",{class:"divider"},null,-1),Xt={class:"page-section p-2",id:"export"},Zt={class:"container mt-5 px-0"},en={class:"row gx-4 gx-lg-5 justify-content-center"},tn={class:"col-lg-8 col-xl-6"},nn=s("h1",{class:"mt-5 text-center"},"config.ign",-1),on=s("hr",{class:"divider"},null,-1),sn={class:"d-grid mb-5"},an={class:"form-data"},rn={class:"double"},ln=y(" Copy "),cn=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-clipboard",viewBox:"0 0 16 16"},[s("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),s("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})],-1),dn=[ln,cn],un={key:0},mn=s("h1",{class:"mt-5 text-center"},"combustion script",-1),hn=s("hr",{class:"divider"},null,-1),pn={class:"d-grid mb-5"},fn={class:"form-data"},vn={class:"mt-5 text-center"},gn=y(" Convert to Ignition-"),_n={key:0},bn=y("Ready Filesystem IMG in the Browser "),yn=s("h2",{class:"mt-5 text-center"}," Convert to ISO Filesystem with mkisofs ",-1),wn=s("pre",{class:"form-data"},"# mkisofs -o ignition.iso -V ignition config.ign",-1),xn={setup(t){const n=[H,M,j,D,X,ee,G,Y],e=$({debug:!1});n.forEach(d=>h.setupFormComponentWatcher(d,le,e));const a=d=>{console.log("downloading.."),h.saveTemplateAsFile("config.ign",i(d))},o=d=>{h.copy(JSON.stringify(i(d),null,2))},i=d=>{let c={ignition:{version:"3.2.0"}};return n.filter(p=>p.methods.hasOwnProperty("encodeToIgn")).forEach(p=>p.methods.encodeToIgn(c,d)),d.debug&&(c["debug:form"]=d),c.combustion=void 0,c},r=d=>{let c={combustion:""};return n.filter(p=>p.methods.hasOwnProperty("encodeToIgn")).forEach(p=>p.methods.encodeToIgn(c,d)),c.combustion!==""&&(console.log(c.combustion),c.output=`#!/bin/bash
# combustion: network
# script generated with https://opensuse.github.io/fuel-ignition/
`+c.combustion+`
# Leave a marker
echo "Configured with combustion" > /etc/issue.d/combustion`),c.output};return(d,c)=>{const p=g("FormKit");return u(),m(F,null,[s("section",Bt,[s("div",Pt,[zt,s("div",Rt,[s("div",Jt,[s("div",Ht,[l(p,{type:"group",modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f)},{default:v(()=>[l(w,{title:"Add Users",displayAtLeastOne:!1},{default:v(()=>[l(H)]),_:1}),l(w,{title:"Create Files",displayAtLeastOne:!1},{default:v(()=>[l(M)]),_:1}),l(w,{title:"Enable or Create Services",displayAtLeastOne:!1},{default:v(()=>[l(j)]),_:1}),l(w,{title:"Modify Existing Services",displayAtLeastOne:!1},{default:v(()=>[l(D)]),_:1}),e.value.debug?(u(),m("div",Mt,[l(w,{title:"DEBUG: Add Bytes",displayAtLeastOne:!1},{default:v(()=>[l(G)]),_:1}),l(w,{title:"DEBUG: Analyze File",displayAtLeastOne:!0,maxComponents:1},{default:v(()=>[l(Y)]),_:1})])):_("",!0)]),_:1},8,["modelValue"])])])]),s("div",jt,[Dt,s("div",Gt,[s("div",Wt,[s("div",Yt,[l(p,{type:"group",modelValue:e.value,"onUpdate:modelValue":c[1]||(c[1]=f=>e.value=f)},{default:v(()=>[l(w,{title:"Install Package With Combustion",displayAtLeastOne:!1},{default:v(()=>[l(X)]),_:1}),l(w,{title:"Add Custom Lines To Combustion Script",displayAtLeastOne:!1},{default:v(()=>[l(ee)]),_:1})]),_:1},8,["modelValue"])])])])])]),Qt]),s("section",Xt,[s("div",Zt,[s("div",en,[s("div",tn,[nn,on,s("div",sn,[s("pre",an,T(i(e.value)),1),s("div",rn,[l(p,{modelValue:e.value.debug,"onUpdate:modelValue":c[2]||(c[2]=f=>e.value.debug=f),type:"checkbox",label:"Debug",name:"debug"},null,8,["modelValue"]),s("button",{class:"btn btn-outline-secondary mb-2",onClick:c[3]||(c[3]=f=>o(e.value))},dn)]),s("button",{class:"btn btn-primary mb-4",onClick:c[4]||(c[4]=f=>a(e.value))}," Download "),r(e.value)!==void 0?(u(),m("div",un,[mn,hn,s("div",pn,[s("pre",fn,T(r(e.value)),1),s("button",{class:"btn btn-primary mb-4",onClick:c[5]||(c[5]=f=>I(h).saveTemplateAsFile("script",r(e.value),!0))}," Download ")])])):_("",!0),s("div",null,[s("h2",vn,[gn,r(e.value)!==void 0?(u(),m("span",_n,"Combustion-")):_("",!0),bn]),l(R,{ignJson:i(e.value),combustionScript:r(e.value)},null,8,["ignJson","combustionScript"])]),yn,wn])])])])])],64)}}};var $n="/fuel-ignition/assets/undraw_convert_re_l0y1.2c99c673.svg";const kn={class:"page-section p-2 bg-dark",id:"edit"},Fn={class:"container mt-5 px-0"},Cn=s("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[s("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[s("h1",{class:"mt-5"},"Convert JSON to Ignition-Ready IMG"),s("hr",{class:"divider"}),s("div",{class:"d-grid mb-5"},[s("img",{class:"text-center mx-auto w-25",src:$n})])])],-1),Tn={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Sn={class:"col-lg-6 expandable-comp text-white"},Kn={class:"form-floating mb-3"},In=s("p",null,null,-1),On=s("hr",{class:"divider"},null,-1),An={class:"page-section p-2",id:"export"},Vn={class:"container mt-5 px-0"},En={class:"row gx-4 gx-lg-5 justify-content-center"},Ln={class:"col-lg-8 col-xl-6"},Un=s("h1",{class:"mt-5 text-center"},"JSON That Will Be Converted",-1),qn=s("hr",{class:"divider"},null,-1),Nn={class:"d-grid mb-5"},Bn={class:"form-data"},Pn={setup(t){const n=$({}),e="The provided json is invalid.";let a=$({});function o(){return a}function i(){let c=document.querySelector(".formkit-remove-files");c!==void 0&&c.click()}async function r(c){let p=c.target.files[0];p!==void 0&&await h.parseJsonFile(p).catch(()=>{alert(e),i()}).then(f=>(a=f,n.value.convert_text=JSON.stringify(a,null,2),f))}const d=function(c){if(n.value.convert_file!==void 0){if(console.log("convert file defined"),!confirm("You already uploaded a file. Discard?")){n.value.convert_text=JSON.stringify(a,null,2);return}i();try{a=JSON.parse(n.value.convert_text)}catch{alert(e)}}};return(c,p)=>{const f=g("FormKit");return u(),m(F,null,[s("section",kn,[s("div",Fn,[Cn,s("div",Tn,[s("div",Sn,[l(f,{type:"group",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=x=>n.value=x)},{default:v(()=>[s("div",Kn,[l(f,{name:"convert_file",label:"Either  -  Config.ign / Json File To Convert",type:"file",onChange:r}),In,l(f,{name:"convert_text",label:"Or  -  JSON as Text",placeholder:'e.g. { "ignition": { "version": "3.2.0" } }',type:"textarea",id:"convert_text","validation-behavior":"live",onKeyup:d})])]),_:1},8,["modelValue"]),l(R,{ignJson:o()},null,8,["ignJson"])])])]),On]),s("section",An,[s("div",Vn,[s("div",En,[s("div",Ln,[Un,qn,s("div",Nn,[s("pre",Bn,T(o()),1)])])])])])],64)}}};var te="/fuel-ignition/assets/undraw_freelancer_re_irh4.f098216d.svg";const zn={},Rn={class:"page-section bg-dark",id:"import"},Jn={class:"container px-4 px-lg-5"},Hn={class:"row gx-4 gx-lg-5 justify-content-center"},Mn=s("div",{class:"d-grid"},[s("img",{class:"text-center mx-auto",src:te})],-1),jn={class:"col-lg-8 col-xl-6 text-white text-center"},Dn=s("h2",{class:"mt-2"},"Sorry, this is not implemented yet!",-1),Gn=s("hr",{class:"divider"},null,-1),Wn=s("p",{class:"mb-5"}," For now, Fuel Ignition can only create new configs. ",-1),Yn=y("Back Home");function Qn(t,n){const e=g("router-link");return u(),m("section",Rn,[s("div",Jn,[s("div",Hn,[Mn,s("div",jn,[Dn,Gn,Wn,l(e,{class:"btn btn-primary btn-xl",to:"/"},{default:v(()=>[Yn]),_:1})])])])])}var Xn=b(zn,[["render",Qn]]);const Zn=s("section",{class:"page-section bg-dark",id:"contact"},[s("div",{class:"container px-4 px-lg-5"},[s("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[s("div",{class:"d-grid"},[s("img",{class:"text-center mx-auto",src:te})])])])],-1),eo=s("section",{class:"page-section p-2",id:"export"},[s("div",{class:"container mt-5 px-0"},[s("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[s("h2",{class:"mt-5 text-center"},"Convert to ISO in the Browser (Alpha)"),s("hr",{class:"divider"}),s("div",{class:"d-grid mb-5"},[s("div",{class:"mx-auto"})])])])],-1),to={setup(t){return(n,e)=>(u(),m(F,null,[Zn,eo],64))}},no="/fuel-ignition/",oo=[{path:"/",name:"Home",component:je},{path:"/edit",name:"Edit",component:xn},{path:"/import",name:"Import",component:Xn},{path:"/convert",name:"Convert",component:Pn},{path:"/test",name:"Test",component:to}],so=ce({history:de(no),routes:oo});window.addEventListener("DOMContentLoaded",t=>{var n=function(){const o=document.body.querySelector("#mainNav");!o||(window.scrollY===0?o.classList.remove("navbar-shrink"):o.classList.add("navbar-shrink"))};n(),document.addEventListener("scroll",n);const e=document.body.querySelector(".navbar-toggler");[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link")).map(function(o){o.addEventListener("click",()=>{window.getComputedStyle(e).display!=="none"&&e.click()})})});ue(Oe).use(me,he).use(so).mount("#app");
