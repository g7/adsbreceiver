var le=Object.defineProperty;var ce=(t,n,e)=>n in t?le(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var F=(t,n,e)=>(ce(t,typeof n!="symbol"?n+"":n,e),e);import{r as b,o as u,c as m,a as o,b as l,w as v,d as y,e as Y,t as C,F as S,f as x,g,h as de,i as ue,u as T,j as me,B as Q,k as X,l as he,m as pe,n as fe,p as ve,q as ge}from"./vendor.4d18dcd3.js";const _e=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}};_e();var D,j,h={GlobalStorage:(D=class{},F(D,"store",{addUsers:{amount:0}}),D),PasswordHashes:(j=class{},F(j,"hashes",{}),j),parseJsonFile:async function(t){return new Promise((n,e)=>{const a=new FileReader;a.onload=s=>{try{return n(JSON.parse(s.target.result))}catch(i){return e(i)}},a.onerror=s=>e(s),a.readAsText(t)})},saveTemplateAsFile:(t,n,e)=>{const a=new Blob(e?[n]:[JSON.stringify(n,null,2)],{type:"text/json"}),s=document.createElement("a");s.download=t,s.href=window.URL.createObjectURL(a),s.dataset.downloadurl=["text/json",s.download,s.href].join(":");const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(i),s.remove()},copy:function(t){var n=document.createElement("textarea");n.innerHTML=t,document.body.appendChild(n),n.select();var e=document.execCommand("copy");return document.body.removeChild(n),e},setupFormComponentWatcher:(t,n,e)=>{t!==void 0&&"methods"in t&&"watchFormData"in t.methods&&n(e,async(a,s)=>{t.methods.watchFormData(a,s)})},uid:()=>(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,""),getFormKey:(t,n,e)=>t+"_"+n+"_"+e,getFormValue:function(t,n,e,a){return n[this.getFormKey(t,e,a)]}},w=(t,n)=>{for(const[e,a]of n)t[e]=a;return t};const be={},ye={class:"navbar navbar-expand-lg navbar-light fixed-top py-3",id:"mainNav"},we={class:"container px-4 px-lg-5"},$e=y("Fuel Ignition \u{1F680}"),xe=Y('<button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ms-auto my-2 my-lg-0"><li class="nav-item"><a class="nav-link" href="#/">Start</a></li><li class="nav-item"><a class="nav-link" href="#about">About</a></li><li class="nav-item"><a class="nav-link" href="https://microos.opensuse.org/" target="_blank" rel="noopener noreferrer">MicroOS</a></li><li class="nav-item"><a class="nav-link" href="https://kubic.opensuse.org/" target="_blank" rel="noopener noreferrer">Kubic</a></li><li class="nav-item"><a class="nav-link" href="https://coreos.github.io/ignition/" target="_blank" rel="noopener noreferrer">Ignition Docs</a></li></ul></div>',2);function ke(t,n){const e=b("router-link");return u(),m("nav",ye,[o("div",we,[l(e,{class:"navbar-brand",to:"/"},{default:v(()=>[$e]),_:1}),xe])])}var Ce=w(be,[["render",ke]]);const Se={},Fe={class:"page-section bg-primary",id:"about"},Te=Y('<div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-lg-8 text-center"><h2 class="text-white mt-0">We&#39;ve got what you need!</h2><hr class="divider divider-light"><p class="text-white-75 mb-4">Looking for an easy way to write and edit Ignition configs? Look no further than Fuel Ignition! Our user-friendly web application makes it a breeze to create the config files you need. No strings attached!</p><a class="btn btn-light btn-xl" href="/fuel-ignition/edit">Get Started!</a></div></div></div>',1),Ae=[Te];function Ke(t,n){return u(),m("section",Fe,Ae)}var Oe=w(Se,[["render",Ke]]);const Ie={class:"bg-light py-5"},Ve={class:"container px-4 px-lg-5"},Ee={class:"small text-center text-muted"},Le={setup(t){return(n,e)=>{const a=b("router-view");return u(),m(S,null,[l(Ce),l(a),l(Oe),o("footer",Ie,[o("div",Ve,[o("div",Ee," Copyright \xA9 "+C(new Date().getFullYear())+" \u2013 built with \u{1F49A}, Vue, and openSUSE ",1)])])],64)}}},Ue={},Ne={class:"masthead"},Pe={class:"container px-4 px-lg-5 h-75"},qe={class:"row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center"},Be=o("div",{class:"col-lg-8 align-self-end"},[o("h1",{class:"text-white font-weight-bold"},[y(" Ignition & Combustion "),o("br"),y("Config Generator ")]),o("hr",{class:"divider"})],-1),ze={class:"col-lg-8 align-self-baseline"},Je=o("p",{class:"text-white-75 mb-5"},[y(" Easily generate new or edit existing Ignition configs. "),o("br"),y("No more fiddling around with JSON or Butane. ")],-1),Me={class:"container-fluid"},Re={class:"row"},He={class:"col-xs-6 mb-3"},De=y("Create New Config"),je={class:"col-xs-6"},Ge=y("JSON to Ignition IMG");function We(t,n){const e=b("router-link");return u(),m("header",Ne,[o("div",Pe,[o("div",qe,[Be,o("div",ze,[Je,o("div",Me,[o("div",Re,[o("div",He,[l(e,{class:"btn btn-primary btn-xl",to:"/edit"},{default:v(()=>[De]),_:1})]),o("div",je,[l(e,{class:"btn btn-primary btn-xl",to:"/convert"},{default:v(()=>[Ge]),_:1})])])])])])])])}var Ye=w(Ue,[["render",We]]),Z="/fuel-ignition/assets/undraw_programming_re_kg9v.a835d9b3.svg",ee="/fuel-ignition/assets/undraw_building_blocks_re_5ahy.a7d51760.svg";const Qe={style:{width:"100% !important"},class:"expandable-comp text-white"},Xe={key:0},Ze={key:0,class:"mb-5"},et=o("hr",{class:"divider"},null,-1),tt=[et],ot={class:"mt-1"},_={props:{displayAtLeastOne:{type:Boolean,default:!0},maxComponents:{type:Number,default:-1},title:String},setup(t){const n=t,e=x(n.displayAtLeastOne?1:0);return(a,s)=>(u(),m("div",Qe,[n.title!==void 0?(u(),m("h4",Xe,C(n.title),1)):g("",!0),(u(!0),m(S,null,de(e.value,i=>(u(),m("div",{key:i},[ue(a.$slots,"default"),i<e.value?(u(),m("div",Ze,tt)):g("",!0)]))),128)),o("div",ot,[t.maxComponents===-1||t.maxComponents!==-1&&t.maxComponents>e.value?(u(),m("button",{key:0,class:"btn btn-primary mr-5 mb-5",onClick:s[0]||(s[0]=i=>e.value++)}," \xA0\xA0\xA0Add\xA0\xA0\xA0 ")):g("",!0),e.value>1||!n.displayAtLeastOne&&e.value>0?(u(),m("button",{key:1,class:"btn btn-danger ml-5 mr-5 mb-5",onClick:s[1]||(s[1]=i=>e.value>1||!n.displayAtLeastOne?e.value--:e.value)}," Remove ")):g("",!0)])]))}},nt={key:0,class:"sk-folding-cube"},st=o("div",{class:"sk-cube1 sk-cube"},null,-1),it=o("div",{class:"sk-cube2 sk-cube"},null,-1),at=o("div",{class:"sk-cube4 sk-cube"},null,-1),rt=o("div",{class:"sk-cube3 sk-cube"},null,-1),lt=[st,it,at,rt],z={props:["ignJson","combustionScript"],setup(t){const n=t;var e=x(!1);const a=new ct,s=async function(){i();let r=await a.convertToImage(n.ignJson,n.combustionScript);a.downloadImageFile(r),i()},i=function(){document.querySelector("#loadingToggle").click()};return(r,d)=>(u(),m(S,null,[o("button",{class:"btn btn-primary mb-4",style:{width:"100%"},onClick:d[0]||(d[0]=c=>s())}," Convert and Download "),T(e)?(u(),m("div",nt,lt)):g("",!0),o("button",{id:"loadingToggle",hidden:"",onClick:d[1]||(d[1]=c=>me(e)?e.value=!T(e):e=!T(e))})],64))}};class ct{constructor(){F(this,"images",{zero:{ignFatDirEntry:61536},combustion:{ignFatDirEntry:61632,combFatDirEntry:63680}});F(this,"alphabet",["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whisky","X-ray","Yankee","Zulu","Nico","Ignaz","Robert","Moritz"]);String.prototype.replaceAt=function(n,e){return this.substring(0,n)+e+this.substring(n+e.length)},String.prototype.hexEncode=function(){var n,e,a="";for(e=0;e<this.length;e++)n=this.charCodeAt(e).toString(16),a+=("000"+n).slice(-4);return a}}bufferToHex(n){return[...new Uint8Array(n)].map(e=>e.toString(16).padStart(2,"0")).join("")}strToHex(n){for(var e="",a=0;a<n.length;a++)e+=n.charCodeAt(a).toString(16);return e}async fetchImage(n){return fetch("templates/ignition-"+n+"-template.img").then(e=>e.blob())}applyPaddingAndLittleEndianIfNecessary(n,e){return e.length%2!=0&&(e="0"+e),console.log("bigEndian :>>",e),n>255&&(e=e.match(/.{2}/g).reverse().join(""),console.log("littleEndian :>> ",e)),e+new Array(9-e.length).join("0")}async convertToImage(n,e){let a=JSON.stringify(n),s=a.hexEncode(),i=a.length*2,r=i.toString(16),d=e===void 0?"zero":"combustion",c=e!==void 0;console.log("images["+d+"] :>> ",this.images[d]),r=this.applyPaddingAndLittleEndianIfNecessary(i,r);let p=await this.fetchImage(d);console.log(p),console.log("jsonSize(dec): "+a.length*2),console.log("jsonSize(hex): "+r);let f=this.images[d].ignFatDirEntry;console.log("dirEntry :>> ",f);let k=(f+28)*2;console.log("images["+d+"] :>> ",this.images[d]),(i>15730099||c&&i>7865049)&&alert(`Warning!

The output img file system will most likely be corrupt, since the supplied JSON config is larger than 15.7 MB.

This is a specific limitation of this config generator. Proceed at your own risk.`);const se=await p.arrayBuffer().then();let $=this.bufferToHex(se);if(console.log("fileSize slice:"+$.slice(k,k+8)),console.log("--- ignJsonHex ---"),console.log(s),console.log("---"),$=$.replace("6c6f72656d697073756d",s).replaceAt(k,r),c){console.log("-- working on combustion hex --");let re=(this.images[d].combFatDirEntry+28)*2,W=e.hexEncode();console.log("combustionScript :>> ",e),console.log("--- cmbScriptHex ---"),console.log(W),console.log("---");let B=e.length*2,K=B.toString(16);K=this.applyPaddingAndLittleEndianIfNecessary(B,K),console.log("combScriptLengthInHex :>> ",K),$=$.replace("646f6c6f72736974616d"+new Array(B*2-19).join("0"),W).replaceAt(re,K)}if(console.log("fileSize slice:"+$.slice(k,k+8)),$.length%2){alert("Error: Cleaned hex string length is odd. Kindly open an issue on GitHub if the error persists.");return}for(var G=new Array,A=0;A<$.length/2;A++){var ie=$.substr(A*2,2);G[A]=parseInt(ie,16)}var ae=new Uint8Array(G);return new Blob([ae],{type:"application/octet-stream"})}downloadImageFile(n){var e=window.document.createElement("a");e.href=window.URL.createObjectURL(n),e.download="ignition-"+this.alphabet[Math.floor(Math.random()*this.alphabet.length)].toLowerCase()+".img",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}const O="user",dt={setup:()=>{const t=h.uid();return{uid:t,Utils:h,formKey:n=>h.getFormKey(O,n,t)}},methods:{encodeToIgn:function(t,n){h.GlobalStorage.store.addUsers.amount=0;const e=(s,i)=>h.getFormValue(O,n,s,i),a=O+"_name_";Object.keys(n).filter(s=>s.includes(a)).map(s=>s.replace(a,"")).forEach(s=>{if(t.passwd="passwd"in t?t.passwd:{users:[]},h.GlobalStorage.store.addUsers.amount++,e("name",s)!=="root"&&(h.GlobalStorage.store.addUsers.onlyUsernameRoot=!1),e("runs_on_suse",s)===!0&&(t.storage===void 0&&(t.storage={}),t.storage.filesystems===void 0&&(t.storage.filesystems=[]),t.storage.filesystems.push({device:"/dev/disk/by-label/ROOT",format:"btrfs",mountOptions:["subvol=/@/home"],path:"/home",wipeFilesystem:!1})),t.passwd.users!==void 0){const i=e("ssh_keys",s),r=i!==void 0&&i.includes(",")?i.replaceAll(" ","").split(","):[i],d=e("passwd",s)===""||e("passwd",s)===void 0;t.passwd.users.push({name:e("name",s),passwordHash:d?void 0:h.PasswordHashes.hashes[s],sshAuthorizedKeys:i===void 0||i===""?void 0:r})}})},watchFormData:async function(t,n){const e=(a,s)=>t[h.getFormKey(O,a,s)];Object.keys(t).filter(a=>a.includes("user_passwd")&&!a.includes("hashed")).map(a=>a.replace("user_passwd_","")).forEach(async a=>{const s=e("passwd",a),i=e("hash_type",a),r=s===""||s===void 0,d=t["user_passwd_"+a]===n["user_passwd_"+a];r||d||ut(s,i).then(c=>h.PasswordHashes.hashes[a]=c)})}}};async function ut(t,n){if(n==="Hash Yourself")return t;var e=await Q.genSalt(10).then();return Q.hash(t,e)}const mt={class:"users"},ht={key:0};function pt(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",mt,[l(r,{class:"form-control",name:t.formKey("name"),label:"Username (required)",placeholder:"write your os username here",validation:"required","validation-behavior":"live",value:"root",help:"A new user will be created, if it does not exist."},null,8,["name"]),l(r,{name:t.formKey("hash_type"),label:"Password Hash Type",placeholder:"bcrypt",type:"select",validation:"optional","validation-behavior":"live",value:"bcrypt",options:["bcrypt","Hash Yourself"],help:"The way you want your password to be hashed."},null,8,["name"]),l(r,{name:t.formKey("passwd"),label:"Password",placeholder:"write the corresponding password here",type:"password",validation:"optional","validation-behavior":"live",help:"Your password is never sent over the internet, everything is local."},null,8,["name"]),l(r,{name:t.formKey("ssh_keys"),label:"SSH Public Keys",placeholder:"write the corresponding ssh keys here, separated by commas, spaces are ignored",type:"textarea",validation:"optional","validation-behavior":"live",help:"Your keys are never sent over the internet, everything is local."},null,8,["name"]),t.Utils.GlobalStorage.store.addUsers.amount==0?(u(),m("div",ht,[l(r,{name:t.formKey("runs_on_suse"),label:"Mount /home",validation:"required",type:"checkbox","validation-behavior":"live",help:"Required on SUSE related systems for creating users not named root. Otherwise, applying the Ignition config will fail"},null,8,["name"])])):g("",!0)])}var I=w(dt,[["render",pt]]);const J="create_file",ft={setup:()=>{const t=h.uid();return{sourceType:x("data"),formKey:e=>h.getFormKey(J,e,t)}},methods:{encodeToIgn:function(t,n){const e=(i,r)=>h.getFormValue(J,n,i,r),a=function(i){return window.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,function(d,c){return String.fromCharCode("0x"+c)}))},s=J+"_path_";Object.keys(n).filter(i=>i.includes(s)).map(i=>i.replace("create_file_path_","")).forEach(i=>{t.storage===void 0&&(t.storage={}),t.storage.files===void 0&&(t.storage.files=[]);let r,d={};switch(e("source_type",i)){case"data":let c=e("data_content",i);r="data:text/plain;charset=utf-8;base64,"+a(c===void 0?"":c);break;case"data-vagrant":let p=e("data_vagrant_content",i);r="data:,"+encodeURIComponent(p===void 0?"":p);break;case"https":r=e("https_content",i);break;case"http":r=e("http_content",i);let f=e("http_verification",i);f&&(d.verification={hash:f});break;case"tftp":case"s3":case"gs":r=e("tftp_s3_gs_content",i);break}t.storage.files.push(Object.assign({path:e("path",i),mode:parseInt(e("mode",i)),overwrite:e("overwrite",i),contents:{source:r}},d))})}}},vt={class:"createfiles"},gt={class:"source"},_t={key:0,class:"data"},bt={key:1,class:"data-vagrant"},yt={key:2,class:"https"},wt={key:3,class:"http"},$t={key:4,class:"tftp-s3-gs"};function xt(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",vt,[l(r,{name:t.formKey("path"),label:"File Path (required)",placeholder:"path on the filesystem",validation:"required","validation-behavior":"live",value:"/etc/someconfig",help:"The absolute path to the file"},null,8,["name"]),l(r,{name:t.formKey("overwrite"),label:"Overwrite",placeholder:"path on the filesystem",validation:"required",type:"checkbox","validation-behavior":"live",help:"Whether to delete preexisting nodes at the path"},null,8,["name"]),l(r,{name:t.formKey("mode"),label:"File Mode (required)",type:"number",value:"420",validation:"required","validation-behavior":"live",help:"The file's permission mode. Note that the mode must be properly specified as a decimal value (i.e. 0644 -> 420)."},null,8,["name"]),o("div",gt,[l(r,{type:"select",name:t.formKey("source_type"),modelValue:t.sourceType,"onUpdate:modelValue":n[0]||(n[0]=d=>t.sourceType=d),label:"Scheme for file contents url (use data for plain text)",help:"If source is omitted and a regular file already exists at the path, Ignition will do nothing. If source is omitted and no file exists, an empty file will be created.",options:["data","data-vagrant","https","http","tftp","s3","gs","omit"]},null,8,["name","modelValue"])]),t.sourceType==="data"?(u(),m("div",_t,[l(r,{name:t.formKey("data_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):g("",!0),t.sourceType==="data-vagrant"?(u(),m("div",bt,[l(r,{name:t.formKey("data_vagrant_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):g("",!0),t.sourceType==="https"?(u(),m("div",yt,[l(r,{name:t.formKey("https_content"),label:"HTTPS Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"])])):g("",!0),t.sourceType==="http"?(u(),m("div",wt,[l(r,{name:t.formKey("http_content"),label:"HTTP Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"]),l(r,{name:t.formKey("http_verification"),label:"Verification Hash (optional)",placeholder:"e.g. sha512-012345678..",type:"text",validation:"optional","validation-behavior":"live",help:"The hash of the contents, in the form <type>-<value> where type is either sha512 or sha256."},null,8,["name"])])):g("",!0),!t.sourceType.includes("http")&&t.sourceType!=="data"&&t.sourceType!=="data-vagrant"&&t.sourceType!=="omit"?(u(),m("div",$t,[l(r,{name:t.formKey("tftp_s3_gs_content"),label:t.sourceType.toUpperCase()+" Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required","validation-behavior":"live"},null,8,["name","label"])])):g("",!0)])}var V=w(ft,[["render",xt]]);const M="start_service",kt={setup:()=>{const t=h.uid();return{sourceType:x("data"),formKey:e=>h.getFormKey(M,e,t)}},methods:{encodeToIgn:function(t,n){const e=(s,i)=>h.getFormValue(M,n,s,i),a=M+"_name_";Object.keys(n).filter(s=>s.includes(a)).map(s=>s.replace(a,"")).forEach(s=>{t.systemd="systemd"in t?t.systemd:{units:[]};let i=e("enabled",s),r=i==="omit";t.systemd.units.push({name:e("name",s),enabled:r?void 0:i==="yes",contents:e("contents",s)})})}}},Ct={class:"startservices"};function St(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",Ct,[l(r,{name:t.formKey("name"),label:"Service Name (required)",validation:"required","validation-behavior":"live",value:"example.service",help:"Every unit must have a unique name. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(r,{name:t.formKey("enabled"),label:"enabled",value:"yes",validation:"optional",type:"select","validation-behavior":"live",help:"Whether or not the service shall be enabled. When true, the service is enabled. When false, the service is disabled. When omitted, the service is unmodified.",options:["yes","no","omit"]},null,8,["name"]),l(r,{name:t.formKey("contents"),label:"Service Unit Content (optional)",placeholder:"write the service unit content here, spaces, newlines etc. are preserved",type:"textarea",validation:"optional","validation-behavior":"live",help:"The contents of the unit."},null,8,["name"])])}var E=w(kt,[["render",St]]);const R="modify_service",Ft={setup:()=>{const t=h.uid();return{formKey:n=>h.getFormKey(R,n,t)}},methods:{encodeToIgn:function(t,n){const e=(s,i)=>h.getFormValue(R,n,s,i),a=R+"_name_";Object.keys(n).filter(s=>s.includes(a)).map(s=>s.replace(a,"")).forEach(s=>{t.systemd="systemd"in t?t.systemd:{units:[]};let i=t.systemd.units.find(d=>d.name===e("name",s)),r={name:e("dropin_name",s),contents:e("contents",s)};if(i!==void 0){if(i.dropins!==void 0){i.dropins.push(r);return}i.dropins=[r];return}t.systemd.units.push({name:e("name",s),dropins:[r]})})}}},Tt={class:"modifyservice"};function At(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",Tt,[l(r,{name:t.formKey("name"),label:"Name of the service that you want to modify (required)",validation:"required","validation-behavior":"live",value:"example.service",placeholder:"e.g. systemd-journald.service",help:"The name of the unit. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(r,{name:t.formKey("dropin_name"),label:"Name of the drop-in file",validation:"required","validation-behavior":"live",value:"debug.conf",help:"The name of the drop-in. This must be suffixed with \u201C.conf\u201D."},null,8,["name"]),l(r,{name:t.formKey("contents"),label:"Drop-In Unit Content (required)",placeholder:"e.g. [Service].. | spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Write the service unit content here, spaces, newlines etc. are preserved."},null,8,["name"])])}var L=w(Ft,[["render",At]]);const H="debug_bytes",Kt={setup:()=>{const t=h.uid();return{uid:t,formKey:n=>h.getFormKey(H,n,t)}},methods:{encodeToIgn:function(t,n){const e=(s,i)=>h.getFormValue(H,n,s,i),a=H+"_size_";Object.keys(n).filter(s=>s.includes(a)).map(s=>s.replace(a,"")).forEach(s=>{var i=new Array(parseInt(e("size",s)-128)+1).join("B");t.debugBytes=t.debugBytes!==void 0?t.debugBytes:[],t.debugBytes.push(i)})}}},Ot={class:"users"};function It(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",Ot,[l(r,{name:t.formKey("size"),label:"Bytes To Add",type:"number",validation:"required","validation-behavior":"live",value:"2048",help:"This is a debug form."},null,8,["name"])])}var U=w(Kt,[["render",It]]);const te="debug_analyze",Vt={setup:()=>{const t=h.uid();return{uid:t,formKey:n=>h.getFormKey(te,n,t)}},methods:{encodeToIgn:function(t,n){const e=te+"_file_";Object.keys(n).filter(a=>a.includes(e)).map(a=>a.replace(e,"")).forEach(a=>{let s;try{s=Object.assign({},n["debug_analyze_file_"+a][0])}catch{}})}}},Et={class:"analyze"};function Lt(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",Et,[l(r,{name:t.formKey("file"),label:"File To Analyze (Console Log)",type:"file",validation:"required","validation-behavior":"live",help:"This is a debug form."},null,8,["name"])])}var N=w(Vt,[["render",Lt]]);const oe="comb_install",Ut={setup:()=>{const t=h.uid();return{uid:t,formKey:n=>h.getFormKey(oe,n,t)}},methods:{encodeToIgn:function(t,n){Object.keys(n).filter(e=>e.includes(oe)).forEach(e=>{t.combustion+=`
zypper --non-interactive install `+n[e]})}}},Nt={class:"combustioninstall"};function Pt(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",Nt,[l(r,{name:t.formKey("package_name"),label:"Name of the package you want to install",type:"text",validation:"required","validation-behavior":"live",value:"vim-small",help:"This will add the line 'zypper --non-interactive install {package name}' to the combustion script."},null,8,["name"])])}var P=w(Ut,[["render",Pt]]);const ne="comb_raw",qt={setup:()=>{const t=h.uid();return{uid:t,formKey:n=>h.getFormKey(ne,n,t)}},methods:{encodeToIgn:function(t,n){Object.keys(n).filter(e=>e.includes(ne)).forEach(e=>{t.combustion+=`
`+n[e]})}}},Bt={class:"combustionraw"};function zt(t,n,e,a,s,i){const r=b("FormKit");return u(),m("div",Bt,[l(r,{name:t.formKey("script_content"),label:"Lines to add",type:"textarea",validation:"required","validation-behavior":"live",value:'echo "hello combustion"',help:"You can find examples of a combustion script here: https://en.opensuse.org/Portal:MicroOS/Combustion#Simple_example"},null,8,["name"])])}var q=w(qt,[["render",zt]]);const Jt={class:"page-section p-2 bg-dark",id:"edit"},Mt={class:"container mt-5 px-0"},Rt=o("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[o("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[o("h1",{class:"mt-5"},"Ignition Config Generator"),o("hr",{class:"divider"}),o("div",{class:"d-grid mb-5"},[o("img",{class:"text-center mx-auto w-50",src:Z})])])],-1),Ht={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Dt={class:"col-lg-6"},jt={class:"form-floating mb-3"},Gt={key:0},Wt={class:"row gx-4 gx-lg-5 justify-content-center"},Yt=o("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[o("h1",{class:"mt-5"},"Add Combustion Scripts"),o("hr",{class:"divider"}),o("div",{class:"d-grid mb-5"},[o("img",{class:"text-center mx-auto w-50",src:ee})])],-1),Qt={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Xt={class:"col-lg-6"},Zt={class:"form-floating mb-3"},eo=o("hr",{class:"divider"},null,-1),to={class:"page-section p-2",id:"export"},oo={class:"container mt-5 px-0"},no={class:"row gx-4 gx-lg-5 justify-content-center"},so={class:"col-lg-8 col-xl-6"},io=o("h1",{class:"mt-5 text-center"},"config.ign",-1),ao=o("hr",{class:"divider"},null,-1),ro={class:"d-grid mb-5"},lo={class:"form-data"},co={class:"double"},uo=y(" Copy "),mo=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-clipboard",viewBox:"0 0 16 16"},[o("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),o("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})],-1),ho=[uo,mo],po={key:0},fo=o("h1",{class:"mt-5 text-center"},"combustion script",-1),vo=o("hr",{class:"divider"},null,-1),go={class:"d-grid mb-5"},_o={class:"form-data"},bo={class:"mt-5 text-center"},yo=y(" Convert to Ignition-"),wo={key:0},$o=y("Ready Filesystem IMG in the Browser "),xo=o("h2",{class:"mt-5 text-center"}," Convert to ISO Filesystem with mkisofs ",-1),ko=o("pre",{class:"form-data"},"# mkisofs -o ignition.iso -V ignition config.ign",-1),Co={setup(t){const n=[I,V,E,L,P,q,U,N],e=x({debug:!1});n.forEach(d=>h.setupFormComponentWatcher(d,X,e));const a=d=>{console.log("downloading.."),h.saveTemplateAsFile("config.ign",i(d))},s=d=>{h.copy(JSON.stringify(i(d),null,2))},i=d=>{let c={ignition:{version:"3.2.0"}};return n.filter(p=>p.methods.hasOwnProperty("encodeToIgn")).forEach(p=>p.methods.encodeToIgn(c,d)),d.debug&&(c["debug:form"]=d),c.combustion=void 0,c},r=d=>{let c={combustion:""};return n.filter(p=>p.methods.hasOwnProperty("encodeToIgn")).forEach(p=>p.methods.encodeToIgn(c,d)),c.combustion!==""&&(console.log(c.combustion),c.output=`#!/bin/bash
# combustion: network
# script generated with https://opensuse.github.io/fuel-ignition/
`+c.combustion+`
# Leave a marker
echo "Configured with combustion" > /etc/issue.d/combustion`),c.output};return(d,c)=>{const p=b("FormKit");return u(),m(S,null,[o("section",Jt,[o("div",Mt,[Rt,o("div",Ht,[o("div",Dt,[o("div",jt,[l(p,{type:"group",modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f)},{default:v(()=>[l(_,{title:"Add Users",displayAtLeastOne:!1},{default:v(()=>[l(I)]),_:1}),l(_,{title:"Create Files",displayAtLeastOne:!1},{default:v(()=>[l(V)]),_:1}),l(_,{title:"Start Services",displayAtLeastOne:!1},{default:v(()=>[l(E)]),_:1}),l(_,{title:"Modify Services",displayAtLeastOne:!1},{default:v(()=>[l(L)]),_:1}),e.value.debug?(u(),m("div",Gt,[l(_,{title:"DEBUG: Add Bytes",displayAtLeastOne:!1},{default:v(()=>[l(U)]),_:1}),l(_,{title:"DEBUG: Analyze File",displayAtLeastOne:!0,maxComponents:1},{default:v(()=>[l(N)]),_:1})])):g("",!0)]),_:1},8,["modelValue"])])])]),o("div",Wt,[Yt,o("div",Qt,[o("div",Xt,[o("div",Zt,[l(p,{type:"group",modelValue:e.value,"onUpdate:modelValue":c[1]||(c[1]=f=>e.value=f)},{default:v(()=>[l(_,{title:"Install Package With Combustion",displayAtLeastOne:!1},{default:v(()=>[l(P)]),_:1}),l(_,{title:"Add Custom Lines To Combustion Script",displayAtLeastOne:!1},{default:v(()=>[l(q)]),_:1})]),_:1},8,["modelValue"])])])])])]),eo]),o("section",to,[o("div",oo,[o("div",no,[o("div",so,[io,ao,o("div",ro,[o("pre",lo,C(i(e.value)),1),o("div",co,[l(p,{modelValue:e.value.debug,"onUpdate:modelValue":c[2]||(c[2]=f=>e.value.debug=f),type:"checkbox",label:"Debug",name:"debug"},null,8,["modelValue"]),o("button",{class:"btn btn-outline-secondary mb-2",onClick:c[3]||(c[3]=f=>s(e.value))},ho)]),o("button",{class:"btn btn-primary mb-4",onClick:c[4]||(c[4]=f=>a(e.value))}," Download "),r(e.value)!==void 0?(u(),m("div",po,[fo,vo,o("div",go,[o("pre",_o,C(r(e.value)),1),o("button",{class:"btn btn-primary mb-4",onClick:c[5]||(c[5]=f=>T(h).saveTemplateAsFile("script",r(e.value),!0))}," Download ")])])):g("",!0),o("div",null,[o("h2",bo,[yo,r(e.value)!==void 0?(u(),m("span",wo,"Combustion-")):g("",!0),$o]),l(z,{ignJson:i(e.value),combustionScript:r(e.value)},null,8,["ignJson","combustionScript"])]),xo,ko])])])])])],64)}}};var So="/fuel-ignition/assets/undraw_convert_re_l0y1.2c99c673.svg";const Fo={class:"page-section p-2 bg-dark",id:"edit"},To={class:"container mt-5 px-0"},Ao=o("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[o("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[o("h1",{class:"mt-5"},"Convert JSON to Ignition-Ready IMG"),o("hr",{class:"divider"}),o("div",{class:"d-grid mb-5"},[o("img",{class:"text-center mx-auto w-25",src:So})])])],-1),Ko={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Oo={class:"col-lg-6 expandable-comp text-white"},Io={class:"form-floating mb-3"},Vo=o("p",null,null,-1),Eo=o("hr",{class:"divider"},null,-1),Lo={class:"page-section p-2",id:"export"},Uo={class:"container mt-5 px-0"},No={class:"row gx-4 gx-lg-5 justify-content-center"},Po={class:"col-lg-8 col-xl-6"},qo=o("h1",{class:"mt-5 text-center"},"JSON That Will Be Converted",-1),Bo=o("hr",{class:"divider"},null,-1),zo={class:"d-grid mb-5"},Jo={class:"form-data"},Mo={setup(t){const n=x({}),e="The provided json is invalid.";let a=x({});function s(){if(n.value.convert_file==null)try{return JSON.parse(n.value.convert_text)}catch(c){return"JSON is invalid: "+c}return a}function i(){n.value.convert_file=void 0,a=void 0;let c=document.querySelector(".formkit-remove-files");c!=null&&c.click()}async function r(c){let p=c.target.files[0];p!==void 0&&h.parseJsonFile(p).catch(()=>{alert(e),i()}).then(f=>(a=f,n.value.convert_text=JSON.stringify(a,null,2),f))}const d=function(){if(a!==void 0&&Object.keys(a.value).length!==0){if(!confirm("You already uploaded a file. Discard the file and keep the text?")){n.value.convert_text=JSON.stringify(a,null,2);return}i()}};return(c,p)=>{const f=b("FormKit");return u(),m(S,null,[o("section",Fo,[o("div",To,[Ao,o("div",Ko,[o("div",Oo,[l(f,{type:"group",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=k=>n.value=k)},{default:v(()=>[o("div",Io,[l(f,{name:"convert_file",label:"Either  -  Config.ign / Json File To Convert",type:"file",onChange:r}),Vo,l(f,{name:"convert_text",label:"Or  -  JSON as Text",placeholder:'e.g. { "ignition": { "version": "3.2.0" } }',type:"textarea",id:"convert_text","validation-behavior":"live",onKeyup:d})])]),_:1},8,["modelValue"]),l(z,{ignJson:s()},null,8,["ignJson"])])])]),Eo]),o("section",Lo,[o("div",Uo,[o("div",No,[o("div",Po,[qo,Bo,o("div",zo,[o("pre",Jo,C(s()),1)])])])])])],64)}}};var Ro="/fuel-ignition/assets/undraw_freelancer_re_irh4.f098216d.svg";const Ho={},Do={class:"page-section bg-dark",id:"import"},jo={class:"container px-4 px-lg-5"},Go={class:"row gx-4 gx-lg-5 justify-content-center"},Wo=o("div",{class:"d-grid"},[o("img",{class:"text-center mx-auto",src:Ro})],-1),Yo={class:"col-lg-8 col-xl-6 text-white text-center"},Qo=o("h2",{class:"mt-2"},"Sorry, this is not implemented yet!",-1),Xo=o("hr",{class:"divider"},null,-1),Zo=o("p",{class:"mb-5"}," For now, Fuel Ignition can only create new configs. ",-1),en=y("Back Home");function tn(t,n){const e=b("router-link");return u(),m("section",Do,[o("div",jo,[o("div",Go,[Wo,o("div",Yo,[Qo,Xo,Zo,l(e,{class:"btn btn-primary btn-xl",to:"/"},{default:v(()=>[en]),_:1})])])])])}var on=w(Ho,[["render",tn]]);const nn={class:"page-section p-2 bg-dark",id:"edit"},sn={class:"container mt-5 px-0"},an=o("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[o("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[o("h1",{class:"mt-5"},"Ignition Config Generator"),o("hr",{class:"divider"}),o("div",{class:"d-grid mb-5"},[o("img",{class:"text-center mx-auto w-50",src:Z})])])],-1),rn={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},ln={class:"col-lg-6"},cn={class:"form-floating mb-3"},dn={key:0},un={class:"row gx-4 gx-lg-5 justify-content-center"},mn=o("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[o("h1",{class:"mt-5"},"Add Combustion Scripts"),o("hr",{class:"divider"}),o("div",{class:"d-grid mb-5"},[o("img",{class:"text-center mx-auto w-50",src:ee})])],-1),hn={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},pn={class:"col-lg-6"},fn={class:"form-floating mb-3"},vn=o("hr",{class:"divider"},null,-1),gn={class:"page-section p-2",id:"export"},_n={class:"container mt-5 px-0"},bn={class:"row gx-4 gx-lg-5 justify-content-center"},yn={class:"col-lg-8 col-xl-6"},wn=o("h1",{class:"mt-5 text-center"},"config.ign",-1),$n=o("hr",{class:"divider"},null,-1),xn={class:"d-grid mb-5"},kn={class:"form-data"},Cn={class:"double"},Sn=y(" Copy "),Fn=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-clipboard",viewBox:"0 0 16 16"},[o("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),o("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})],-1),Tn=[Sn,Fn],An={key:0},Kn=o("h1",{class:"mt-5 text-center"},"combustion script",-1),On=o("hr",{class:"divider"},null,-1),In={class:"d-grid mb-5"},Vn={class:"form-data"},En={class:"mt-5 text-center"},Ln=y(" Convert to Ignition-"),Un={key:0},Nn=y("Ready Filesystem IMG in the Browser "),Pn=o("h2",{class:"mt-5 text-center"}," Convert to ISO Filesystem with mkisofs ",-1),qn=o("pre",{class:"form-data"},"# mkisofs -o ignition.iso -V ignition config.ign",-1),Bn={setup(t){const n=[I,V,E,L,P,q,U,N],e=x({debug:!1});n.forEach(d=>h.setupFormComponentWatcher(d,X,e));const a=d=>{console.log("downloading.."),h.saveTemplateAsFile("config.ign",i(d))},s=d=>{h.copy(JSON.stringify(i(d),null,2))},i=d=>{let c={ignition:{version:"3.2.0"}};return n.filter(p=>p.methods.hasOwnProperty("encodeToIgn")).forEach(p=>p.methods.encodeToIgn(c,d)),d.debug&&(c["debug:form"]=d),c.combustion=void 0,c},r=d=>{let c={combustion:""};return n.filter(p=>p.methods.hasOwnProperty("encodeToIgn")&&p.__file.includes("Comb")).forEach(p=>p.methods.encodeToIgn(c,d)),c.combustion!==""&&(console.log(c.combustion),c.output=`#!/bin/bash
# combustion: network
# script generated with https://opensuse.github.io/fuel-ignition/
`+c.combustion+`
# Leave a marker
echo "Configured with combustion" > /etc/issue.d/combustion`),c.output};return(d,c)=>{const p=b("FormKit");return u(),m(S,null,[o("section",nn,[o("div",sn,[an,o("div",rn,[o("div",ln,[o("div",cn,[l(p,{type:"group",modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f)},{default:v(()=>[l(_,{title:"Add Users",displayAtLeastOne:!1},{default:v(()=>[l(I)]),_:1}),l(_,{title:"Create Files",displayAtLeastOne:!1},{default:v(()=>[l(V)]),_:1}),l(_,{title:"Start Services",displayAtLeastOne:!1},{default:v(()=>[l(E)]),_:1}),l(_,{title:"Modify Services",displayAtLeastOne:!1},{default:v(()=>[l(L)]),_:1}),e.value.debug?(u(),m("div",dn,[l(_,{title:"DEBUG: Add Bytes",displayAtLeastOne:!1},{default:v(()=>[l(U)]),_:1}),l(_,{title:"DEBUG: Analyze File",displayAtLeastOne:!0,maxComponents:1},{default:v(()=>[l(N)]),_:1})])):g("",!0)]),_:1},8,["modelValue"])])])]),o("div",un,[mn,o("div",hn,[o("div",pn,[o("div",fn,[l(p,{type:"group",modelValue:e.value,"onUpdate:modelValue":c[1]||(c[1]=f=>e.value=f)},{default:v(()=>[l(_,{title:"Install Package With Combustion",displayAtLeastOne:!1},{default:v(()=>[l(P)]),_:1}),l(_,{title:"Add Custom Lines To Combustion Script",displayAtLeastOne:!1},{default:v(()=>[l(q)]),_:1})]),_:1},8,["modelValue"])])])])])]),vn]),o("section",gn,[o("div",_n,[o("div",bn,[o("div",yn,[wn,$n,o("div",xn,[o("pre",kn,C(i(e.value)),1),o("div",Cn,[l(p,{modelValue:e.value.debug,"onUpdate:modelValue":c[2]||(c[2]=f=>e.value.debug=f),type:"checkbox",label:"Debug",name:"debug"},null,8,["modelValue"]),o("button",{class:"btn btn-outline-secondary mb-2",onClick:c[3]||(c[3]=f=>s(e.value))},Tn)]),o("button",{class:"btn btn-primary mb-4",onClick:c[4]||(c[4]=f=>a(e.value))}," Download "),r(e.value)!==void 0?(u(),m("div",An,[Kn,On,o("div",In,[o("pre",Vn,C(r(e.value)),1),o("button",{class:"btn btn-primary mb-4",onClick:c[5]||(c[5]=f=>T(h).saveTemplateAsFile("script",r(e.value),!0))}," Download ")])])):g("",!0),o("div",null,[o("h2",En,[Ln,r(e.value)!==void 0?(u(),m("span",Un,"Combustion-")):g("",!0),Nn]),l(z,{ignJson:i(e.value),combustionScript:r(e.value)},null,8,["ignJson","combustionScript"])]),Pn,qn])])])])])],64)}}},zn="/fuel-ignition/",Jn=[{path:"/",name:"Home",component:Ye},{path:"/edit",name:"Edit",component:Co},{path:"/import",name:"Import",component:on},{path:"/convert",name:"Convert",component:Mo},{path:"/test",name:"Test",component:Bn}],Mn=he({history:pe(zn),routes:Jn});window.addEventListener("DOMContentLoaded",t=>{var n=function(){const s=document.body.querySelector("#mainNav");!s||(window.scrollY===0?s.classList.remove("navbar-shrink"):s.classList.add("navbar-shrink"))};n(),document.addEventListener("scroll",n);const e=document.body.querySelector(".navbar-toggler");[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link")).map(function(s){s.addEventListener("click",()=>{window.getComputedStyle(e).display!=="none"&&e.click()})})});fe(Le).use(ve,ge).use(Mn).mount("#app");
